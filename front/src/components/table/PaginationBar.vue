<script setup lang="ts">
import { onMounted, ref } from "vue";

const props = defineProps<{
    pages:number,
    elementsPerPage: number;
    results: number;
    visiblePages: Array<number>;
}>();

const activeIndex = ref(1);

const emit = defineEmits<{
  (event: "dataPagination", page: number): void;
  (event: "nextPage"): void;
  (event: "prevPage"): void;
}>();

const clickedPage = (page: number, index: number) => {
  activeIndex.value = page;
  emit("dataPagination", page);
};

const prevArroy = () => {
  if (activeIndex.value > 1) {
    activeIndex.value -= 1;
    emit("prevPage");
  }
};

const nextArroy = () => {
  if (activeIndex.value < props.pages) {
    activeIndex.value += 1;
    emit("nextPage");
  }
};

onMounted(() => {
});
</script>

<template>
  <div class="flex items-center w-full h-full">
    <div class="">
      <span class="ml-2">{{ elementsPerPage }} elementos de {{ results }} resultados totales</span>
    </div>
    <nav class="ml-auto">
      <ul class="">
        <li @click="prevArroy"><a href="#">&lt;</a></li>

        <li
          v-for="(page, index) in visiblePages"
          :class="activeIndex === page ? 'bg-primary-light' : 'bg-white'"
          :key="page"
          @click="clickedPage(page,index)">
          <a href="#"> {{ page }} </a>
        </li>

        <li @click="nextArroy"><a href="#">></a></li>
      </ul>
    </nav>
  </div>
</template>

<style scoped>
  nav>ul {
    @apply list-none flex items-center justify-end;
  }
  nav>ul>li {
    @apply border rounded-md mx-1 py-1 w-8 h-8 text-center cursor-pointer font-semibold text-third hover:text-white hover:bg-primary-light;
  }
</style>